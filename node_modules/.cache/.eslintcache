[{"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/index.js":"1","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/App.js":"2","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/reportWebVitals.js":"3","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/Map.js":"4","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/Marker.js":"5","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/Index.js":"6","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/Root.js":"7","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/api.js":"8","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/Card.js":"9","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/Detail.js":"10","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/LeaveRating.js":"11","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/Rating.js":"12","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/RatingPage.js":"13","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/CommentPage.js":"14","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/Modal.js":"15","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/Contact.js":"16","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/TextInput.js":"17","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/TextAreaInput.js":"18","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/ContactConfirm.js":"19","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/Checkbox.js":"20","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/Admin.js":"21","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/ErrorPage.js":"22"},{"size":4074,"mtime":1670315669697,"results":"23","hashOfConfig":"24"},{"size":154,"mtime":1669786720498,"results":"25","hashOfConfig":"24"},{"size":362,"mtime":1669362768395,"results":"26","hashOfConfig":"24"},{"size":2026,"mtime":1670112156745,"results":"27","hashOfConfig":"24"},{"size":505,"mtime":1670527771937,"results":"28","hashOfConfig":"24"},{"size":343,"mtime":1670285498233,"results":"29","hashOfConfig":"24"},{"size":326,"mtime":1670315163944,"results":"30","hashOfConfig":"24"},{"size":1474,"mtime":1670289810279,"results":"31","hashOfConfig":"24"},{"size":718,"mtime":1670528023648,"results":"32","hashOfConfig":"24"},{"size":1740,"mtime":1670285209833,"results":"33","hashOfConfig":"24"},{"size":1978,"mtime":1670182672669,"results":"34","hashOfConfig":"24"},{"size":662,"mtime":1670129958148,"results":"35","hashOfConfig":"24"},{"size":1071,"mtime":1670185526758,"results":"36","hashOfConfig":"24"},{"size":820,"mtime":1670200456607,"results":"37","hashOfConfig":"24"},{"size":690,"mtime":1670285740053,"results":"38","hashOfConfig":"24"},{"size":3461,"mtime":1670285268299,"results":"39","hashOfConfig":"24"},{"size":383,"mtime":1670210954747,"results":"40","hashOfConfig":"24"},{"size":370,"mtime":1670209221514,"results":"41","hashOfConfig":"24"},{"size":367,"mtime":1670525259702,"results":"42","hashOfConfig":"24"},{"size":1349,"mtime":1670526648883,"results":"43","hashOfConfig":"24"},{"size":3123,"mtime":1670315480639,"results":"44","hashOfConfig":"24"},{"size":136,"mtime":1670525129958,"results":"45","hashOfConfig":"24"},{"filePath":"46","messages":"47","suppressedMessages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"12nu56a",{"filePath":"49","messages":"50","suppressedMessages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"52","messages":"53","suppressedMessages":"54","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"56","messages":"57","suppressedMessages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"59","messages":"60","suppressedMessages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","suppressedMessages":"64","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","suppressedMessages":"67","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","suppressedMessages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","suppressedMessages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","suppressedMessages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","suppressedMessages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","suppressedMessages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"83","messages":"84","suppressedMessages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","suppressedMessages":"88","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"89","messages":"90","suppressedMessages":"91","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","suppressedMessages":"94","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"95","messages":"96","suppressedMessages":"97","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"98","messages":"99","suppressedMessages":"100","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"101","messages":"102","suppressedMessages":"103","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"104","messages":"105","suppressedMessages":"106","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"107","messages":"108","suppressedMessages":"109","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"110"},{"filePath":"111","messages":"112","suppressedMessages":"113","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/index.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/App.js",["114"],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/reportWebVitals.js",[],[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/Map.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/Marker.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/Index.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/Root.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/api.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/Card.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/Detail.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/LeaveRating.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/Rating.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/RatingPage.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/CommentPage.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/Modal.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/Contact.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/TextInput.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/TextAreaInput.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/ContactConfirm.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/Checkbox.js",[],[],"/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/routes/Admin.js",["115","116","117","118"],[],"import { useEffect, useState } from \"react\";\nimport { Form, redirect, useLoaderData } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { deleteComment } from \"../api\";\nimport Checkbox from \"../Checkbox\";\nimport Modal from \"../Modal\";\n\nexport default function Admin() {\n  useEffect(() => {\n    document.title = \"Parkable: Admin\";\n  }, []);\n\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [parkingLots, setParkingLots] = useState([]);\n  //   const [displayDeleteBtn, setDisplayDeleteBtn] = useState(\"hidden\");\n\n  const isIndeterminate =\n    parkingLots.some((parkingLot) => parkingLot?.isChecked !== true) &&\n    parkingLots.some((parkingLot) => parkingLot?.isChecked === true);\n\n  const isSelectedAll = !parkingLots.some(\n    (parkingLot) => parkingLot?.isChecked !== true\n  );\n\n  let hideDeleteBtn = true;\n  if (isSelectedAll || isIndeterminate) {\n    hideDeleteBtn = false;\n  }\n\n  const datas = useLoaderData();\n  const newdata = datas.map((data) => {\n    return {\n      name:\n        \"id:\" +\n        data.id +\n        \", \" +\n        data.body +\n        \" (parking lot id \" +\n        data.parkingLotId +\n        \")\",\n    };\n  });\n\n  useEffect(() => {\n    setParkingLots(newdata);\n  }, []);\n\n  const handleChange = (event) => {\n    const { name, checked } = event.target;\n    if (name === \"selectAll\") {\n      let tempParkingLot = parkingLots.map((parkingLot) => {\n        return { ...parkingLot, isChecked: checked };\n      });\n      setParkingLots(tempParkingLot);\n    } else {\n      let tempParkingLot = parkingLots.map((parkingLot) =>\n        parkingLot.name === name\n          ? { ...parkingLot, isChecked: checked }\n          : parkingLot\n      );\n      setParkingLots(tempParkingLot);\n    }\n  };\n\n  const handleDelete = (event) => {\n    // event.preventDefault();\n    let count = 0;\n    parkingLots.map((parkingLot) => {\n      let startIndex = parkingLot.name.indexOf(\":\");\n      let stopIndex = parkingLot.name.indexOf(\",\");\n      let commentId = parkingLot.name.slice(startIndex + 1, stopIndex);\n      if (parkingLot.isChecked) {\n        count += 1;\n        deleteComment(commentId);\n      }\n    });\n    console.log(count);\n    console.log(parkingLots.length);\n    if (parkingLots.length - count === 0) {\n      toast.success(\"All comments are deleted.\");\n      alert(\"You have deleted all the comments\");\n    }\n  };\n\n  return (\n    <div>\n      <button\n        type=\"button\"\n        id=\"menu\"\n        onClick={() => {\n          setIsModalOpen(!isModalOpen);\n        }}\n      >\n        Menu\n      </button>\n\n      {isModalOpen && (\n        <Modal\n          onClose={() => {\n            setIsModalOpen(!isModalOpen);\n          }}\n        ></Modal>\n      )}\n\n      <form onSubmit={handleDelete}>\n        <Checkbox\n          parkingLots={parkingLots}\n          handleChange={handleChange}\n          isIndeterminate={isIndeterminate}\n          isSelectedAll={isSelectedAll}\n        />\n        <button\n          type=\"submit\"\n          className=\"btn btn-sm btn-danger\"\n          hidden={hideDeleteBtn}\n        >\n          Delete\n        </button>\n      </form>\n    </div>\n  );\n}\n","/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/ErrorPage.js",[],[],{"ruleId":"119","severity":1,"message":"120","line":2,"column":8,"nodeType":"121","messageId":"122","endLine":2,"endColumn":11},{"ruleId":"119","severity":1,"message":"123","line":2,"column":10,"nodeType":"121","messageId":"122","endLine":2,"endColumn":14},{"ruleId":"119","severity":1,"message":"124","line":2,"column":16,"nodeType":"121","messageId":"122","endLine":2,"endColumn":24},{"ruleId":"125","severity":1,"message":"126","line":46,"column":6,"nodeType":"127","endLine":46,"endColumn":8,"suggestions":"128"},{"ruleId":"129","severity":1,"message":"130","line":68,"column":34,"nodeType":"131","messageId":"132","endLine":68,"endColumn":36},"no-unused-vars","'Map' is defined but never used.","Identifier","unusedVar","'Form' is defined but never used.","'redirect' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'newdata'. Either include it or remove the dependency array.","ArrayExpression",["133"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside",{"desc":"134","fix":"135"},"Update the dependencies array to be: [newdata]",{"range":"136","text":"137"},[1227,1229],"[newdata]"]