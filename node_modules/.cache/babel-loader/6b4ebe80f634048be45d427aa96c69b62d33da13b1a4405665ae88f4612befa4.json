{"ast":null,"code":"var _jsxFileName = \"/Users/peterxu/Documents/USC/\\u5B66\\u4E60/Senior Fall/ITP404/final-project/src/index.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport \"./index.css\";\n// import App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { createBrowserRouter, redirect, RouterProvider } from \"react-router-dom\";\nimport Root from \"./routes/Root\";\nimport Index from \"./routes/Index\";\nimport { fetchParkingLots, fetchParkingLotComment, fetchParkingLotDetail, saveRating, deleteComment, saveComment } from \"./api\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport Detail from \"./routes/Detail\";\nimport LeaveRating from \"./routes/LeaveRating\";\nimport { toast } from \"react-toastify\";\nimport RatingPage from \"./routes/RatingPage\";\nimport CommentPage from \"./routes/CommentPage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst router = createBrowserRouter([{\n  path: \"/\",\n  element: /*#__PURE__*/_jsxDEV(Root, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 14\n  }, this),\n  children: [{\n    path: \"/\",\n    element: /*#__PURE__*/_jsxDEV(Index, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 18\n    }, this),\n    loader() {\n      return fetchParkingLots();\n    }\n  }, {\n    path: \"/parkingLots/:id\",\n    loader(_ref) {\n      let {\n        params\n      } = _ref;\n      return fetchParkingLotDetail(params.id);\n    },\n    element: /*#__PURE__*/_jsxDEV(Detail, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 18\n    }, this),\n    children: [{\n      path: \"/parkingLots/:id/ratings\",\n      loader(_ref2) {\n        let {\n          params\n        } = _ref2;\n        return fetchParkingLotDetail(params.id);\n      },\n      element: /*#__PURE__*/_jsxDEV(RatingPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 22\n      }, this),\n      children: [{\n        path: \"/parkingLots/:id/ratings/comments\",\n        loader(_ref3) {\n          let {\n            params\n          } = _ref3;\n          return fetchParkingLotComment(params.id);\n        },\n        element: /*#__PURE__*/_jsxDEV(CommentPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 26\n        }, this)\n      }]\n    }, {\n      path: \"/parkingLots/:id/ratings/new\",\n      element: /*#__PURE__*/_jsxDEV(LeaveRating, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 22\n      }, this),\n      loader(_ref4) {\n        let {\n          params\n        } = _ref4;\n        return fetchParkingLotDetail(params.id);\n      },\n      action(_ref5) {\n        let {\n          request,\n          params\n        } = _ref5;\n        return request.formData().then(formData => {\n          // console.log(parseInt(formData.get(\"rating\")));\n          if (formData.get(\"comment\") !== \"\") {\n            // if there is comment, call save comment function\n            return saveComment(formData.get(\"comment\"), params.id).then(() => {\n              toast.success(\"Your comment have been posted.\");\n            });\n          }\n          return saveRating(params.id, parseFloat(formData.get(\"origrating\")), parseInt(formData.get(\"numrating\")), parseInt(formData.get(\"rating\"))).then(() => {\n            toast.success(\"You have successfully submitted the rating.\");\n            return redirect(`/parkingLots/${params.id}/ratings`);\n          });\n        });\n      }\n    }]\n  }, {\n    path: \"/comments/:commentId/destroy\",\n    action(_ref6) {\n      let {\n        request,\n        params\n      } = _ref6;\n      console.log(params.commentId);\n      return request.formData().then(formData => {\n        return deleteComment(params.commentId).then(() => {\n          toast.success(\"Your comment has been deleted\");\n          const parkingLotId = formData.get(\"parkingLotId\");\n          return redirect(`/parkingLots/${parkingLotId}/ratings/comments`);\n        });\n      });\n    }\n  }]\n}]);\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nroot.render( /*#__PURE__*/_jsxDEV(RouterProvider, {\n  router: router\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 112,\n  columnNumber: 13\n}, this));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();","map":{"version":3,"names":["React","ReactDOM","reportWebVitals","createBrowserRouter","redirect","RouterProvider","Root","Index","fetchParkingLots","fetchParkingLotComment","fetchParkingLotDetail","saveRating","deleteComment","saveComment","Detail","LeaveRating","toast","RatingPage","CommentPage","router","path","element","children","loader","params","id","action","request","formData","then","get","success","parseFloat","parseInt","console","log","commentId","parkingLotId","root","createRoot","document","getElementById","render"],"sources":["/Users/peterxu/Documents/USC/学习/Senior Fall/ITP404/final-project/src/index.js"],"sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport \"./index.css\";\n// import App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport {\n  createBrowserRouter,\n  redirect,\n  RouterProvider,\n} from \"react-router-dom\";\nimport Root from \"./routes/Root\";\nimport Index from \"./routes/Index\";\nimport {\n  fetchParkingLots,\n  fetchParkingLotComment,\n  fetchParkingLotDetail,\n  saveRating,\n  deleteComment,\n  saveComment,\n} from \"./api\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport Detail from \"./routes/Detail\";\nimport LeaveRating from \"./routes/LeaveRating\";\nimport { toast } from \"react-toastify\";\nimport RatingPage from \"./routes/RatingPage\";\nimport CommentPage from \"./routes/CommentPage\";\n\nconst router = createBrowserRouter([\n  {\n    path: \"/\",\n    element: <Root />,\n    children: [\n      {\n        path: \"/\",\n        element: <Index />,\n        loader() {\n          return fetchParkingLots();\n        },\n      },\n      {\n        path: \"/parkingLots/:id\",\n        loader({ params }) {\n          return fetchParkingLotDetail(params.id);\n        },\n        element: <Detail />,\n        children: [\n          {\n            path: \"/parkingLots/:id/ratings\",\n            loader({ params }) {\n              return fetchParkingLotDetail(params.id);\n            },\n            element: <RatingPage />,\n            children: [\n              {\n                path: \"/parkingLots/:id/ratings/comments\",\n                loader({ params }) {\n                  return fetchParkingLotComment(params.id);\n                },\n                element: <CommentPage />,\n              },\n            ],\n          },\n          {\n            path: \"/parkingLots/:id/ratings/new\",\n            element: <LeaveRating />,\n            loader({ params }) {\n              return fetchParkingLotDetail(params.id);\n            },\n            action({ request, params }) {\n              return request.formData().then((formData) => {\n                // console.log(parseInt(formData.get(\"rating\")));\n                if (formData.get(\"comment\") !== \"\") {\n                  // if there is comment, call save comment function\n                  return saveComment(formData.get(\"comment\"), params.id).then(\n                    () => {\n                      toast.success(\"Your comment have been posted.\");\n                    }\n                  );\n                }\n                return saveRating(\n                  params.id,\n                  parseFloat(formData.get(\"origrating\")),\n                  parseInt(formData.get(\"numrating\")),\n                  parseInt(formData.get(\"rating\"))\n                ).then(() => {\n                  toast.success(\"You have successfully submitted the rating.\");\n                  return redirect(`/parkingLots/${params.id}/ratings`);\n                });\n              });\n            },\n          },\n        ],\n      },\n      {\n        path: \"/comments/:commentId/destroy\",\n        action({ request, params }) {\n          console.log(params.commentId);\n          return request.formData().then((formData) => {\n            return deleteComment(params.commentId).then(() => {\n              toast.success(\"Your comment has been deleted\");\n              const parkingLotId = formData.get(\"parkingLotId\");\n              return redirect(`/parkingLots/${parkingLotId}/ratings/comments`);\n            });\n          });\n        },\n      },\n    ],\n  },\n]);\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nroot.render(<RouterProvider router={router} />);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}